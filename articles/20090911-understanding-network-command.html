<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  
<!-- Mirrored from primacore.net/articles/20090911-understanding-network-command.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 03:48:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="distribution" content="global" />
    <title>Primacore Networks, LLC :: Understanding the &quot;network&quot; command</title>
    <base  />
    <link rel="index" title="Understanding the &quot;network&quot; command" href="../index.html" />
    <link rel="canonical" href="../index.html" />
    <meta name="description" content="Clarification on IGP usage and operation of the &quot;network&quot; command in Cisco IOS" />
    <meta name="keywords" content="keywords" />
    <meta name="author" content="Primacore Networks, LLC" />
    <meta name="published" content="2011-01-05 11:15:00" />
    <meta name="revised" content="2015-11-15 11:16:36" />
    <meta name="copyright" content="&copy;2015 Primacore Networks, LLC" />
    <link rel="stylesheet" type="text/css" href="../assets/css/reset.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/main-menu.css" />
    <link rel="stylesheet" type="text/css" href="../assets/prettyPhoto/css/prettyPhoto.css"/>
    <script type="text/javascript" src="../assets/js/jquery-1.4.1.min.js"></script>
    <script type="text/javascript" src="../assets/js/cufon-yui.js"></script>
    <script type="text/javascript" src="../assets/prettyPhoto/js/jquery.prettyPhoto.js"></script>
    <script type="text/javascript" src="../assets/js/init-prettyPhoto.js"></script>
    <script type="text/javascript" src="../assets/js/jquery.cycle.all.min.js"></script>
    <script type="text/javascript" src="../assets/js/testimonial_slideshow.js"></script>
    <script type="text/javascript" src="../assets/js/Aller_400-Aller_700.font.js"></script>
    <script type="text/javascript">
          Cufon.replace('h1,h2,h3,h4',{fontFamily:'Aller',fontWeight :'700'});
    </script>

  </head>
  <body>
    <div id="wrap">
      <div id="header">
        <div id="header_top"></div>
        <h1 class="logo"><a title="#" href="../index.html">amedeo</a></h1>
        <div id="search">
          <form action="https://primacore.net/search.html">
            <fieldset>
            <input name="search" type="text"  onblur="if (this.value==''){this.value='Search our website...'};" onfocus="if(this.value=='Search our website...'){this.value=''};" value="Search our website..."/>
            <input name="button" type="submit" value="" class="button"/>
            <input type="hidden" name="id" value="" /> 
            </fieldset>
          </form>
        </div>
        <div class="clear"></div>
        <ul id="nav">
          <li class="top">
            <a href="../index.html" title="Home" class="top_link"><span>Home</span></a>
          </li>

          <li class="top">
            <a href="../about/index.html" title="About" class="top_link"><span class="down">About</span></a>
            <ul class="sub">
              <li class="top"><a href="../about/core-values.html" title="Core Values">Core Values</a></li>

              <li class="top"><a href="../about/privacy.html" title="Privacy Policy">Privacy Policy</a></li>

              <li class="top"><a href="../about/mission.html" title="Mission Statement">Mission</a></li>

              <li class="top"><a href="../about/site-credits.html" title="Site Credits">Site Credits</a></li>

              <li class="top"><a href="../about/terms.html" title="Terms of Use">Terms of Use</a></li>

            </ul>
          </li>

          <li class="top">
            <a href="../services/index.html" title="Services" class="top_link"><span class="down">Services</span></a>
            <ul class="sub">
              <li class="top"><a href="../services/index.html#networking" title="Networking">Networking</a></li>

              <li class="top"><a href="../services/index.html#security" title="Security">Security</a></li>

              <li class="top"><a href="../services/index.html#process" title="Process Optimization">Process Optimization</a></li>

              <li class="top"><a href="../services/index.html#project" title="Project Management">Project Management</a></li>

              <li class="top"><a href="../services/case-studies.html" title="Case Studies">Case Studies</a></li>

              <li class="top"><a href="../services/upcoming-articles.html" title="Upcoming Articles">Upcoming Articles</a></li>

            </ul>
          </li>

          <li class="top">
            <a href="../news/index.html" title="News" class="top_link"><span>News</span></a>
          </li>

          <li class="top">
            <a href="index.html" title="Articles" class="top_link"><span>Articles</span></a>
          </li>

          <li class="top">
            <a href="../contact.html" title="Contact" class="top_link"><span>Contact Us</span></a>
          </li>

        </ul>
        <!-- end main menu -->
      </div>
      <!-- end header -->
      <div id="inside_wrap">
        <div class="breadcrumb">
          <ul> 
            <li><a href="../index.html" title="Primacore Networks, LLC">Home</a></li>




            <li>&nbsp; &raquo;&nbsp; <a href="index.html" title="">Articles</a></li>




            <li>&nbsp; &raquo;&nbsp; Understanding the &quot;network&quot; command</li>









          </ul>
        </div>
        <div id="left_large_page" class="clearfix">
          <div class="right_column">
            <div class="item">
              <h3>Recent Articles</h3>
              <div id="testimonial_slideshow">
                <div class="testimonial_item">
                  <p><b><a href="ip-subnetting-part1.html" title="IP Subnetting Part 1 - IPv4">IP Subnetting Part 1 - IPv4</a></b></p>
                  <p><i>Despite the large number of jokes in high school about never needing to use mathematics after graduation, the art form known as IP Subnetting requires a solid grasp of math based on binary numbers (0, 1).&nbsp; In this first part of my devoted attention on IP Subnetting, we&apos;ll focus on Internet Protocol version 4 (IPv4) addressing, some history, and the methods available to make IPv4 addressing go farther.</i></p>
                </div>
                <div class="testimonial_item">
                  <p><b><a href="20090911-understanding-network-command.html" title="Understanding the &quot;network&quot; command">Understanding the "network" command</a></b></p>
                  <p><i>Many network engineers seem to misunderstand the use of the <strong>network</strong> command in routing protocols on Cisco IOS, especially once they see the usage in BGP.&nbsp; This occurrence happens more frequently with those studying to become a CCNA, but may not be obvious to experienced engineers either.&nbsp; Based on my own experience, I have very distinct memories of confusion when the concept I understood was first corrected by a more experienced engineer.&nbsp; So let&apos;s breakdown the confusion.</i></p>
                </div>
                <div class="testimonial_item">
                  <p><b><a href="osi-model-troubleshooting.html" title="Troubleshooting with OSI Model">Troubleshooting with OSI Model</a></b></p>
                  <p><i>At Layers 1-4, there are several tools or tricks available to quickly verify normal operations.&nbsp; I have routinely used each of these tools for many years and expect many of them to be familiar.&nbsp; Many of these tools are technology-specific, meaning that one tool has an application with one technology but not another.&nbsp; I should also caution that the list below is not intended to be exhaustive or complete.&nbsp; It&apos;s just a collection of my thoughts on what I find really useful.</i></p>
                </div>
              </div>
              <p class="text_right"><a href="#"><img src="../assets/img/testimonial-back-btn.png" alt="back" width="25" height="20" id="slidePrev" /></a><a href="#"><img src="../assets/img/testimonial-next-btn.png" alt="next" width="25" height="20" id="slideNext" /></a></p>
            </div>
            <div class="divider"></div>
            <div class="item">
              <h3>Quick Links</h3>
              <ul class="sec_nav">
                <li><a href="../news/index.html"><span>Recent News</span></a></li>
                <li><a href="index.html">Recent Articles</a></li>
                <li><a href="../services/index.html">Services Overview</a></li>
              </ul>
            </div>
            <div class="divider"></div>
            <div class="item">
              <h3>Info Point</h3>
              <p class="info_point">Building Bridges from Today to Tomorrow&trade;</p>
              Primacore&reg; offers consulting services tailored to your business needs, whether that requires process automation and strict, environmental standardization or if you keep an open mind to new technologies and how they can support your business functions.&nbsp; Invite us into your world and, together, we can start &quot;Building Bridges from Today to Tomorrow&trade;&quot;
              <p class="text_right"><a href="../services/index.html" class="button"><span>Learn More</span></a></p>
            </div>
            <div class="divider"></div>
          </div>
          <!-- end right column -->
          <div class="main_content">

                  <h1>Understanding the &quot;network&quot; command</h1>
                  <p>Many network engineers seem to misunderstand the use of the <strong>network</strong> command in routing protocols on Cisco IOS, especially once they see the usage in BGP.&nbsp; This occurrence happens more frequently with those studying to become a CCNA, but may not be obvious to experienced engineers either.&nbsp; Based on my own experience, I have very distinct memories of confusion when the concept I understood was first corrected by a more experienced engineer.&nbsp; So let&apos;s breakdown the confusion.</p>
                  <h2>What does the &quot;network&quot; command REALLY do?</h2>
                  <p>Cisco IOS has two different uses for the <strong>network</strong> command, as it relates to IGPs (like OSPF and EIGRP) and BGP.&nbsp; In BGP, the <strong>network</strong> command is used to introduce the prefix it represents to the BGP table.&nbsp; BGP will not introduce that prefix if the route is not already known in the global routing table (or VRF table with VRF-Lite and MPLS VPN).&nbsp; Instead, the command has no effect if the network isn&apos;t already known (whether learned by IGP, configured statically, or directly connected).&nbsp; IGPs, on the other hand, don&apos;t use the <strong>network</strong> command to advertise that network to any neighbors it might form.&nbsp; Instead, the <strong>network</strong> command provides a method to enable a routing protocol instance on certain interfaces.&nbsp; Quoting from the <a href="http://www.cisco.com/en/US/docs/ios/12_3/iproute/command/reference/ip2_n1g.html#wp1040780" title="network (EIGRP)">command reference on EIGRP</a>:</p>
                  <blockquote><p>When the <strong>network</strong> command is configured for an EIGRP routing process, the router matches one or more local interfaces.&nbsp; The <strong>network</strong> command will match only local interfaces that are configured with addresses that are within the same subnet as the address that has been configured with the <strong>network</strong> command.&nbsp; The router will then establish neighbors through the matched interfaces.</p></blockquote>
                  <h2>Clarifying Example of the &quot;network&quot; command</h2>
                  <p>Here&apos;s a simple example for this discussion with three routers connected via two point-to-point circuits:</p>
                  <img alt="Three routers with two point-to-point circuits" class="image" title="3rtr2p2p" width="446" height="71" src="../assets/content_images/3rtr2p2p.png" />
                  <p>Assume the following configuration for R2:</p>
                  <pre>router ospf 1
 network 192.0.1.0 0.0.0.3 area 0
 network 192.0.2.0 0.0.0.3 area 0</pre>
                  <p>Since both networks appear on R2, the router will attempt to form OSPF neighbors with other routers on those segments.&nbsp; But those networks won&apos;t be advertised in OSPF through those two statements, as such.&nbsp; Instead, OSPF will include any interfaces that match the two <strong>network</strong> statements in its Database Descriptor exchanges.&nbsp; The following configuration has the same effect:</p>
                  <pre>! ** Wildcard mask longer than subnet mask **
router ospf 1
 network 192.0.1.0 0.0.1.255 area 0</pre>
                  <p>In both cases so far, R2 will attempt to form adjacencies on its two interfaces configured 192.0.1.2/30 and 192.0.2.1/30.&nbsp; In the first case, the wildcard mask is the inverse of the subnet mask for the interface.&nbsp; But the second case uses a larger wildcard mask that covers both interfaces with a single statement.&nbsp; While this step sounds nice in simplifying the config to one line, the additional complication comes from the ambiguity in which interfaces the config will include (since other interfaces may match this config, like 192.0.1.253/25 or 192.0.2.126/27).&nbsp; As a result, fewer lines makes the configuration less clear.&nbsp; Consider this example instead:</p>
                  <pre>! ** Wildcard mask only supports one interface address **
router ospf 1
 network 192.0.1.2 0.0.0.0 area 0
 network 192.0.2.1 0.0.0.0 area 0</pre>
                  <p>In this last case, the network command uses the &quot;host&quot; wildcard mask, which will only match a single interface address for each line.&nbsp; While this type of configuration would increase the size of the configuration for routers with many interfaces, the clarity it provides is unmatched compared to the other two configurations.&nbsp; No ambiguity exists.&nbsp; as OSPF will <strong>ONLY</strong> be enabled on the two interfaces configured 192.0.1.2 and 192.0.2.1 without regard to the subnet mask for those interfaces.</p>
                  <h2>Summary</h2>
                  <p>While the &quot;host&quot; wildcard mask may be new to some, I consider it an essential best practice on Cisco IOS with OSPF and the other IGPs.&nbsp; The clarity it provides is crucial to maintain exacting control for all configurations in the network.&nbsp; The other benefit comes from the reinforcement of precise interface configuration, since you can&apos;t enable the routing protocol on an interface that isn&apos;t intended to participate in the IGP.&nbsp; I don&apos;t know for certain, but it seems as though Cisco realizes the confusion that exists around this command.&nbsp; For some time, other vendor implementations of IGPs have placed the IGP enablement on each interface, so as to remove the ambiguity.&nbsp; With the introduction of Cisco Nexus switches, NX-OS (as it&apos;s known) follows this convention, even though other IOS conventions are still followed.&nbsp; Whether this is a matter of the influence of Linux (as NX-OS is based on Linux&hellip;look for GRUB at startup!) or a strategic shift on Cisco&apos;s part, the emphasis is still clear:&nbsp; the <strong>network</strong> command does not advertise a local subnet into an IGP!</p>

          </div>
          <!-- end main content -->
        </div>
        <!-- end page content -->
        <div class="footer">
          <div class="content">
            <ul class="footer_nav clearfix">
              <li class="one-fourth">
                <h4><img src="../assets/img/core_icon.png" width="16" height="16" alt="rss" />&nbsp; CORPORATE INFO</h4>
                <ul class="pages">
                  <li><a href="../index.html">Home</a></li>
                  <li><a href="../about/core-values.html">Our Core Values</a></li>
                  <li><a href="../about/mission.html">Mission Statement</a></li>
                  <li><a href="../about/site-credits.html">Site Credits</a></li>
                  <li><a href="../contact.html">Contact Us</a></li>
                </ul>
              </li>
              <li class="one-fourth">
                <h4><img src="../assets/img/wrench_icon.png" width="16" height="16" alt="rss" />&nbsp; OUR SERVICES</h4>
                <ul class="pages">
                  <li><a href="../services/index.html">Services Overview</a></li>
                  <li><a href="../services/index.html#networking">Networking</a></li>
                  <li><a href="../services/index.html#security">Security</a></li>
                  <li><a href="../services/index.html#process">Process Optimization</a></li>
                  <li><a href="../services/index.html#project">Project Management</a></li>
                  <li><a href="../services/case-studies.html">Case Studies</a></li>
                </ul>
              </li>
              <li class="one-fourth">
                <h4><img src="../assets/img/rss_icon.png" width="14" height="14" alt="rss" />&nbsp; STAY CONNECTED</h4>
                <ul class="pages">
                  <li><a href="../articles.rss">Articles RSS</a></li>
                  <li><a href="../news.rss">News RSS</a></li>
                </ul>
              </li>
              <li class="one-fourth last">
                <h4><img src="../assets/img/contact_icon.png" width="16" height="15" alt="contact" />&nbsp; CONTACT INFO</h4>
                <ul>
                  <li><b>E-mail:</b><br />
                    <a href="../contact.html">Contact Us</a> page</li>
                  <li><b>Telephone:</b><br />
                    +1 972 863 CORE</li>
                  <li><b>Address:</b><br />
                    3136 Round Tree Ln<br />
                    Frisco, TX 75034-4589</li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="copy clearfix">
            <div class="left">&copy;2015 Primacore Networks, LLC. All rights reserved.<br />
              <a href="../about/site-credits.html">Copyright Information</a> | <a href="../about/privacy.html">Privacy Policy</a> | <a href="../about/terms.html">Terms of Use</a></div>
            <div class="right"><a href="https://validator.w3.org/nu/?doc=https://primacore.net/articles/20090911-understanding-network-command.html"><img src="../assets/img/valid-xhtml10-blue.png" alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a> <a href="http://jigsaw.w3.org/css-validator/validator?uri=https://primacore.net/articles/20090911-understanding-network-command.html"><img src="../assets/img/valid-css2-blue.png" alt="Valid CSS Level 2.1" height="31" width="88" /></a></div>
          </div>
        </div>        <!-- end footer -->
      </div>
      <!-- end inside wrap -->
      <div id="inside_wrap_bottom"></div>
    </div>
  <!-- end wrap -->
  </body>

<!-- Mirrored from primacore.net/articles/20090911-understanding-network-command.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Oct 2017 03:48:57 GMT -->
</html>